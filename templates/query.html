{% extends "layout.html" %}

{% block ludwigviz_top %}

    <div class="mdl-card__title">
        <h3 class="mdl-card__title-text">{{ corpus_name }}</h3>

    </div>
    <div class="mdl-card__actions mdl-card--border">
        <a href="{{ url_for('neighbors', corpus_name=corpus_name) }}"
           class="mdl-button">Re-load</a>
        <a href="{{ url_for('query', corpus_name=corpus_name) }}"
           class="mdl-button">Back</a>
    </div>

{% endblock %}

{% block ludwigviz_middle %}

    <form action="{{ url_for('validate', corpus_name=corpus_name) }}">
        <div class="mdl-card__supporting-text">

            {%  for msg in error_messages %}
                <div class="mdl-textfield mdl-js-textfield ">
                    <label class="mdl-textfield__label" for="field_id{{ loop.index0 }}"></label>
                    <input class="mdl-textfield__input"
                           id="field_id{{ loop.index0 }}"
                           name="word"
                           type="text"
                           value="{{ default_word }}">
                    <span class="mdl-textfield__error">{{ msg }}</span>
                </div>
                <div class="mdl-layout-spacer"></div>
            {% endfor %}

        </div>



        <div class="mdl-card__actions mdl-card--border">
            <input type="submit" name="get_neighbors" class="mdl-button" value="get neighbors">
        </div>
    </form>

    <script type='text/javascript'>
        $(document).ready(function() {
            $.ajax({url: '{{ url_for("autocomplete", corpus_name=corpus_name) }}'}).done(
                function (data) {
                    $('.mdl-textfield__input').autocomplete({
                        source: data.json_list,
                        minLength: 2
                    });
                });
        });
    </script>
{% endblock %}

{% block ludwigviz_bottom %}
{% endblock %}